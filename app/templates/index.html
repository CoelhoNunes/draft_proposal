{% extends "base.html" %}
{% block content %}
<div class="flex min-h-screen">
  <!-- Sidebar -->
  <aside class="sidebar bg-gray-900 border-r border-gray-800 p-4">
    <h1 class="text-xl font-bold mb-4">RFP Runs</h1>
    <div id="runs" hx-get="/runs" hx-trigger="load" hx-swap="innerHTML">
      <!-- Runs list loads here -->
    </div>

    <div class="mt-6">
      <h2 class="text-lg font-semibold mb-2">New Run</h2>
      <form id="upload-form" hx-post="/upload" hx-encoding="multipart/form-data" hx-target="#main" class="space-y-2 border border-gray-700 rounded p-3">
        <input type="text" name="name" placeholder="Run name" class="w-full text-black px-2 py-1 rounded" required>
        <input type="file" name="file" accept=".pdf,.docx,.txt" class="w-full text-sm">
        <button class="w-full bg-indigo-600 hover:bg-indigo-500 px-3 py-2 rounded font-semibold">Upload</button>
      </form>
    </div>

    <div class="mt-6">
      <h2 class="text-lg font-semibold mb-2">FileShare</h2>
      <button onclick="window.open('https://your-sharepoint-or-fileshare-url','_blank')" class="w-full bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded">Open FileShare</button>
      <form class="mt-3" hx-get="/files/search" hx-target="#main">
        <input type="text" name="q" placeholder="Search documents..." class="w-full text-black px-2 py-1 rounded">
      </form>
    </div>
  </aside>

  <!-- Main content -->
  <main id="main" class="flex-1 p-6 space-y-4">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-2xl font-bold">Checklist &amp; Draft</h1>
        <p class="text-gray-400">Upload an RFP on the left to begin.</p>
      </div>
    </div>
    <div class="grid grid-cols-2 gap-4">
      <section class="col-span-1 space-y-3">
        <div id="checklist" class="border border-gray-800 rounded p-3 min-h-[300px]">
          <h2 class="font-semibold mb-3">Checklist</h2>
          <div class="text-gray-400">No run selected.</div>
        </div>
      </section>
      <section class="col-span-1 space-y-3">
        <div id="draft" class="border border-gray-800 rounded p-3 min-h-[300px]">
          <div class="flex items-center justify-between mb-2">
            <h2 class="font-semibold">Draft</h2>
          </div>
          <div class="text-gray-400">No run selected.</div>
        </div>
        <div id="preview" class="border border-gray-800 rounded p-3 min-h-[200px]">
          <h2 class="font-semibold mb-2">Preview PDF</h2>
          <div class="text-gray-400">No run selected.</div>
        </div>
      </section>
    </div>
  </main>
</div>
{% endblock %}
